{"ast":null,"code":"import _toConsumableArray from \"/home/ernohanninen/simpli-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/ernohanninen/simpli-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/ernohanninen/simpli-app/src/getResults.js\";\n\nimport React, { useState, forwardRef, useImperativeHandle } from 'react';\nimport axios from \"axios\";\nimport './App.css'; //import { toBeRequired } from '@testing-library/jest-dom/dist/matchers';\n\nvar GetResults = function GetResults() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      plotPaths = _useState2[0],\n      setPlotPaths = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      areaPlots = _useState4[0],\n      setAreaPlots = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sampleImages = _useState6[0],\n      setSampleImages = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      trigger = _useState8[0],\n      setTrigger = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      dropDown = _useState10[0],\n      setDropDown = _useState10[1]; //const [sample, setSample] = useState(\"\")\n\n\n  var sample = \"\";\n  /*if(trigger === true){\n      displayResults()\n      setTrigger(false)\n  }*/\n\n  var displayResults = function displayResults() {\n    //document.getElementById(\"resultsButton\").style.display = \"none\"\n    console.log(\"OK\");\n    axios.get(\"/fetchResults\").then(function (response) {\n      //let paths = \"../src/images/area/total_ROI_area_boxplots.png\"\n      var data = response.data;\n      var samples = data[\"samples\"];\n      console.log(samples);\n      var area = data[\"area\"];\n      console.log(area);\n      setPlotPaths(area);\n      displayImages(area, samples);\n    });\n  };\n\n  var displayImages = function displayImages(area, samples) {\n    console.log(area);\n    var optionItems = Object.entries(samples).map(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: key,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }\n      }, key);\n    });\n    setDropDown( /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, \"Quality control: \"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"sampleSelector\",\n      id: \"sampleSelector\",\n      onChange: function onChange(event) {\n        return handleChangeSelect(event);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: \"true\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 18\n      }\n    }, \"None\"), optionItems))); //<p>Thresholded {key}</p>   \n    //\n    //Map samples\n\n    setSampleImages(Object.entries(samples).map(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      return [].concat(_toConsumableArray(sampleImages), [/*#__PURE__*/React.createElement(\"div\", {\n        id: key,\n        hidden: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: require(\"../src/images/\" + value[0][\"preprocessed\"]),\n        class: \"col-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: require(\"../src/images/\" + value[1][\"thresholded\"]),\n        class: \"col-2\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      })))]);\n    }));\n    setAreaPlots( /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"Measurement of marker positive area\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: require(\"../src/images/\" + area),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }))); //setAreaPlots(<img src={require(\"../src/images/logo.svg\")}></img>)\n  };\n\n  var handleChangeSelect = function handleChangeSelect(event) {\n    if (event.target.value != \"None\") {\n      document.getElementById(event.target.value).style.display = \"block\";\n    }\n\n    console.log(sample);\n\n    if (sample != \"\" && sample != \"None\") {\n      document.getElementById(sample).style.display = \"none\"; //console.log(\"HERE\")\n    }\n\n    sample = event.target.value;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"resultsForm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    hidden: true,\n    id: \"load\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"Running SIMPLI\")), /*#__PURE__*/React.createElement(\"div\", {\n    hidden: true,\n    id: \"results\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Ready\"), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"resultsButton\",\n    type: \"button\",\n    onClick: function onClick(event) {\n      return displayResults();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Display results\"), dropDown, sampleImages, areaPlots)));\n};\n\nexport default GetResults; //      <App callparentFunction={()=>handleSettingsSubmit}/>","map":{"version":3,"names":["React","useState","forwardRef","useImperativeHandle","axios","GetResults","plotPaths","setPlotPaths","areaPlots","setAreaPlots","sampleImages","setSampleImages","trigger","setTrigger","dropDown","setDropDown","sample","displayResults","console","log","get","then","response","data","samples","area","displayImages","optionItems","Object","entries","map","key","value","event","handleChangeSelect","require","target","document","getElementById","style","display"],"sources":["/home/ernohanninen/simpli-app/src/getResults.js"],"sourcesContent":["import React,  { useState, forwardRef, useImperativeHandle } from 'react';\nimport axios from \"axios\";\nimport './App.css';\n//import { toBeRequired } from '@testing-library/jest-dom/dist/matchers';\n\nconst GetResults = () => { \n    \n    const [plotPaths, setPlotPaths] = useState(\"\")\n    const [areaPlots, setAreaPlots] = useState(\"\")\n    const [sampleImages, setSampleImages] = useState(\"\")\n    const [trigger, setTrigger] = useState(true)\n    const [dropDown, setDropDown] = useState(\"\")\n    //const [sample, setSample] = useState(\"\")\n    var sample = \"\"\n\n\n    /*if(trigger === true){\n        displayResults()\n        setTrigger(false)\n    }*/\n\n    const displayResults = () => {\n        //document.getElementById(\"resultsButton\").style.display = \"none\"\n        console.log(\"OK\")\n        axios.get(\"/fetchResults\")\n        .then(function(response){\n           //let paths = \"../src/images/area/total_ROI_area_boxplots.png\"\n           let data = response.data\n           let samples = data[\"samples\"]\n\n           console.log(samples)\n           let area = data[\"area\"]\n           console.log(area)\n           setPlotPaths(area)\n           displayImages(area, samples)          \n        })\n    }\n\n    const displayImages = (area, samples) => { \n        console.log(area)\n\n        let optionItems = Object.entries(samples).map(([key,value]) => \n            <option value={key}>{key}</option>\n        )\n\n        setDropDown(\n        <div class=\"row\">\n            <p>Quality control: </p>\n            <select name=\"sampleSelector\" id=\"sampleSelector\" onChange={event => handleChangeSelect(event)}>\n                 <option selected=\"true\">None</option>  \n                 {optionItems}\n                  \n            </select>\n        </div>\n        )\n        //<p>Thresholded {key}</p>   \n        //\n        //Map samples\n        setSampleImages(Object.entries(samples).map(([key,value]) => {\n            return([...sampleImages, \n            <div id = {key} hidden>\n                <div>\n                    <img src={require(\"../src/images/\" + value[0][\"preprocessed\"])} class=\"col-1\"></img>\n                </div>\n                <div>\n                    <img src={require(\"../src/images/\" + value[1][\"thresholded\"])} class=\"col-2\"></img>\n                </div>\n            </div>])\n        }))\n\n\n        setAreaPlots(\n            <div>\n                <p>Measurement of marker positive area</p>\n                <img src={require(\"../src/images/\" + area)}></img>\n            </div>)\n        //setAreaPlots(<img src={require(\"../src/images/logo.svg\")}></img>)\n    } \n\n    const handleChangeSelect = (event) => { \n        if(event.target.value != \"None\"){\n            document.getElementById(event.target.value).style.display = \"block\"\n        }\n        console.log(sample)\n        if(sample != \"\" && sample != \"None\"){\n            document.getElementById(sample).style.display = \"none\"\n            //console.log(\"HERE\")\n        }\n        sample = event.target.value \n        \n    }\n\n    return(\n    <div>\n    <form id=\"resultsForm\">\n\n      <div hidden id=\"load\">\n          <p>Running SIMPLI</p>         \n      </div>\n      \n      <div hidden id=\"results\">    \n        <p>Ready</p>         \n\n          <button id=\"resultsButton\" type=\"button\" onClick={event => displayResults()}>Display results</button>\n          {dropDown}\n          {sampleImages}\n          {areaPlots}\n      </div>\n      </form>\n    </div>\n\n    )\n}\nexport default GetResults;\n //      <App callparentFunction={()=>handleSettingsSubmit}/>\n\n "],"mappings":"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"},"metadata":{},"sourceType":"module"}