{"ast":null,"code":"import _toConsumableArray from \"/home/ernohanninen/simpli-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/ernohanninen/simpli-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ernohanninen/simpli-app/src/image_thresholding.js\";\nimport React, { useState } from 'react';\nimport \"./App.css\";\nimport axios from \"axios\";\nexport default function Thresholding() {\n  var _this = this;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var runThresholding = function runThresholding() {\n    document.getElementById(\"submitImage\").style.display = \"none\";\n    document.getElementById(\"running\").style.display = \"block\";\n    var formData = new FormData();\n    console.log(image.files);\n    formData.append(\"image\", image);\n    console.log(image);\n    var url = '/thresholdImage';\n    axios.post(url, formData).then(function (response) {\n      if (response.data == \"error\") {\n        //If error\n        console.log(\"########ERROR########\");\n      } else {\n        //IF everyting okay\n        console.log(response);\n        var original_img = response.data[\"original_image\"];\n        var min_thresh = response.data[\"min_thresh\"];\n        var otsu_thresh = response.data[\"otsu_thresh\"];\n        var sau_thresh = response.data[\"sau_thresh\"];\n        var yen_thresh = response.data[\"yen_thresh\"];\n        displayImages(original_img, min_thresh, otsu_thresh, sau_thresh, yen_thresh); //Calling function which displays the images         \n      }\n    });\n\n    var displayImages = function displayImages(area, samples, totalCells, resultingCells) {\n      var segmentation = false;\n      console.log(samples);\n      console.log(Object.keys(samples));\n\n      if (samples[Object.keys(samples)[0]].length === 3) {\n        segmentation = true;\n      } //Get the values for drop-down list\n\n\n      var optionItems = Object.entries(samples).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: key,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 17\n          }\n        }, key);\n      }); //Create the dropdown list\n\n      setDropDown( /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }\n      }, \"Samples: \"), /*#__PURE__*/React.createElement(\"select\", {\n        name: \"sampleSelector\",\n        id: \"sampleSelector\",\n        onChange: function onChange(event) {\n          return handleChangeSelect(event, segmentation);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        id: \"optionNone\",\n        value: \"None\",\n        selected: \"true\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 22\n        }\n      }, \"None\"), optionItems))); //Map samples and set the images to variable\n\n      setSampleImages(Object.entries(samples).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            key = _ref4[0],\n            value = _ref4[1];\n\n        return [].concat(_toConsumableArray(sampleImages), [/*#__PURE__*/React.createElement(\"div\", {\n          id: key,\n          hidden: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }\n        }, \"Original image:\"), /*#__PURE__*/React.createElement(\"img\", {\n          class: \"contain\",\n          src: require(\"../src/images/\" + value[0][\"preprocessed\"]),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }\n        }, \"Thresholded \", key, \":\"), /*#__PURE__*/React.createElement(\"img\", {\n          class: \"contain\",\n          src: require(\"../src/images/\" + value[1][\"thresholded\"]),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }\n        }, \"Original image:\"), /*#__PURE__*/React.createElement(\"img\", {\n          class: \"contain\",\n          src: require(\"../src/images/\" + value[0][\"preprocessed\"]),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }\n        }, \"Thresholded \", key, \":\"), /*#__PURE__*/React.createElement(\"img\", {\n          class: \"contain\",\n          src: require(\"../src/images/\" + value[1][\"thresholded\"]),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }\n        })))]);\n      }));\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"submitImage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"tiff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Load tiff: \\xA0\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"tiff\",\n    type: \"file\",\n    onChange: function onChange(e) {\n      return setImage(e.target.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      return runThresholding();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Thresholding\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"running\",\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"Running thresholding algorithms\"))));\n}","map":{"version":3,"names":["React","useState","axios","Thresholding","image","setImage","runThresholding","document","getElementById","style","display","formData","FormData","console","log","files","append","url","post","then","response","data","original_img","min_thresh","otsu_thresh","sau_thresh","yen_thresh","displayImages","area","samples","totalCells","resultingCells","segmentation","Object","keys","length","optionItems","entries","map","key","value","setDropDown","event","handleChangeSelect","setSampleImages","sampleImages","require","e","target"],"sources":["/home/ernohanninen/simpli-app/src/image_thresholding.js"],"sourcesContent":["import React, { useState } from 'react';\nimport \"./App.css\";\nimport axios from \"axios\";\n\n\nexport default function Thresholding()  {\n    const [image, setImage] = useState()\n\n    const runThresholding = () => {\n        document.getElementById(\"submitImage\").style.display = \"none\"\n        document.getElementById(\"running\").style.display = \"block\"\n\n        const formData = new FormData()\n        console.log(image.files)\n        formData.append(\"image\", image)\n        console.log(image)\n        const url = '/thresholdImage';\n        axios.post(url, formData)\n            .then((response) =>{\n                if(response.data==\"error\"){ //If error\n                    console.log(\"########ERROR########\")\n                }\n                else{ //IF everyting okay\n                    console.log(response)\n                    let original_img = response.data[\"original_image\"]\n                    let min_thresh = response.data[\"min_thresh\"]\n                    let otsu_thresh = response.data[\"otsu_thresh\"]\n                    let sau_thresh = response.data[\"sau_thresh\"]\n                    let yen_thresh  =response.data[\"yen_thresh\"]\n\n                    displayImages(original_img, min_thresh, otsu_thresh, sau_thresh, yen_thresh) //Calling function which displays the images         \n                }\n        });      \n\n        const displayImages = (area, samples, totalCells, resultingCells) => { \n\n            let segmentation = false\n            console.log(samples)\n            console.log(Object.keys(samples))\n            if(samples[Object.keys(samples)[0]].length === 3){\n                segmentation = true\n            }\n    \n            //Get the values for drop-down list\n            let optionItems = Object.entries(samples).map(([key,value]) => \n                <option value={key}>{key}</option>\n            )\n            \n    \n            //Create the dropdown list\n            setDropDown(\n            <div class=\"row\">\n                <p>Samples: </p>\n                <select name=\"sampleSelector\" id=\"sampleSelector\" onChange={event => handleChangeSelect(event, segmentation)}>\n                     <option id=\"optionNone\" value=\"None\" selected=\"true\">None</option>  \n                     {optionItems}\n                      \n                </select>\n                \n                \n            </div>\n            )\n             \n            //Map samples and set the images to variable\n            setSampleImages(Object.entries(samples).map(([key,value]) => {\n                \n    \n                return([...sampleImages, \n                <div id = {key} hidden>\n                     \n                    <div>\n                        <p>Original image:</p>    \n                        <img class=\"contain\"  src={require(\"../src/images/\" + value[0][\"preprocessed\"])}></img>\n                    </div>\n                    <div>\n                        <p>Thresholded {key}:</p>\n                        <img class=\"contain\" src={require(\"../src/images/\" + value[1][\"thresholded\"])} ></img>\n                    </div>\n                    <div>\n                        <p>Original image:</p>    \n                        <img class=\"contain\" src={require(\"../src/images/\" + value[0][\"preprocessed\"])}></img>\n                    </div>\n                    <div>\n                        <p>Thresholded {key}:</p>\n                        <img class=\"contain\" src={require(\"../src/images/\" + value[1][\"thresholded\"])}></img>\n                    </div>\n    \n                </div>])\n            }))\n\n        }\n        \n\n    }\n    return( \n    <div>\n        <form>\n        <div id=\"submitImage\">\n            <div class=\"row\">            \n                <label for=\"tiff\">Load tiff: &nbsp;</label>\n                <input name=\"tiff\" type = \"file\" onChange={(e)=>setImage(e.target.files[0])} />\n                \n            </div>\n            <br></br>\n            <button type=\"button\" onClick={() => runThresholding()}>Thresholding</button>\n        </div>\n        <div id = \"running\" hidden>\n            <p>Running thresholding algorithms</p>\n        </div>\n        \n        \n        </form>\n        \n    </div>\n    )\n   \n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}